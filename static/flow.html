<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelo de Previs√£o de Vaz√£o - Esta√ß√£o Funil</title>
    <link rel="stylesheet" href="/static/flow-styles.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <h1>üåä Modelo de Previs√£o de Vaz√£o - Esta√ß√£o Funil (19091)</h1>
            <p>Sistema de previs√£o mensal usando ensemble ML (MLP + XGBoost)</p>
            <div class="status-badge" id="modelStatus">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Verificando status...</span>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            
            <!-- Performance do Modelo -->
            <section class="section">
                <h2>üìä Performance do Modelo - Dados de Teste (2020-2023)</h2>
                <div class="chart-container">
                    <div id="timeSeriesChart" class="chart"></div>
                </div>
                <div class="metrics-grid" id="metricsGrid">
                    <!-- M√©tricas ser√£o carregadas via JavaScript -->
                </div>
                <div class="chart-legend">
                    <p><strong>Legenda:</strong> O gr√°fico mostra 4 componentes principais - dados observados (linha cont√≠nua preta), previs√µes do modelo (linha tracejada vermelha), banda de incerteza das previs√µes (√°rea amarela) e faixa min/max dos dados observados originais do CSV (√°rea cinza).</p>
                </div>
            </section>

            <!-- Demonstra√ß√£o da API -->
            <section class="section">
                <h2>üîå Demonstra√ß√£o da API</h2>
                <div class="api-demo">
                    <div class="api-request">
                        <h3>Requisi√ß√£o</h3>
                        <div class="request-info">
                            <div class="method">POST</div>
                            <div class="url">/api/models/flow/predict</div>
                        </div>
                        <div class="form-container">
                            <div class="form-group">
                                <button type="button" id="loadExampleBtn" class="btn-secondary">
                                    üìã Carregar exemplo diferente
                                </button>
                                <button type="button" id="predictBtn" class="btn-primary">
                                    üöÄ Testar API
                                </button>
                            </div>
                        </div>
                        <textarea id="requestPayload" class="json-editor" rows="30">{
  "year": 2023,
  "month": 1,
  "u2_min": -2.9,
  "u2_max": 5.0,
  "tmin_min": 16.5,
  "tmin_max": 22.5,
  "tmax_min": 24.8,
  "tmax_max": 31.2,
  "rs_min": 15.1,
  "rs_max": 25.2,
  "rh_min": 61.2,
  "rh_max": 88.7,
  "eto_min": 3.2,
  "eto_max": 5.8,
  "pr_min": 0.0,
  "pr_max": 356.0,
  "y_lag1": 172.43,
  "y_lag2": 179.47,
  "y_lag3": 90.92,
  "y_rm3": 147.61,
  "pr_lag1": 42.5,
  "pr_lag2": 83.5,
  "pr_lag3": 45.2,
  "pr_sum3": 171.2,
  "pr_api3": 104.9
}</textarea>
                    </div>
                    <div class="api-response">
                        <h3>Resposta</h3>
                        <div class="response-status">
                            <span class="status-code" id="responseStatus">200</span>
                            <span class="response-time" id="responseTime">-</span>
                        </div>
                        <pre id="responsePayload" class="code-block">
Clique em "Fazer Previs√£o" para ver a resposta da API
                        </pre>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 UFRJ InSilico API - Modelo de Previs√£o de Vaz√£o Mensal</p>
            <p>Esta√ß√£o 19091 (Funil) ‚Ä¢ Ensemble MLP + XGBoost ‚Ä¢ Confian√ßa: 83%</p>
        </div>
    </footer>

    <script src="/static/flow-script.js"></script>
</body>
</html>